{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\JavaProjects\\\\ticket\\\\src\\\\page\\\\RegisterPage.js\";\nimport React from \"react\";\nimport { Button, Form, Input, Select } from 'antd';\nimport 'antd/dist/antd.css';\nimport { postFetch } from \"../function/fetch\";\nconst {\n  Option\n} = Select;\n\nconst prefixSelector = /*#__PURE__*/_jsxDEV(Form.Item, {\n  name: \"prefix\",\n  noStyle: true,\n  children: /*#__PURE__*/_jsxDEV(Select, {\n    style: {\n      width: 70\n    },\n    children: [/*#__PURE__*/_jsxDEV(Option, {\n      value: \"86\",\n      children: \"+86\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Option, {\n      value: \"87\",\n      children: \"+87\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 5\n}, this);\n\nexport default class RegisterPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.login = () => {\n      let id = this.state.id;\n      let pw = this.state.pw;\n      console.log(id);\n      console.log(pw);\n      fetch('http://192.168.1.106:8080/login?id=' + id + \"&password=\" + pw, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'default'\n      }).then(rsp => rsp.json().then(rsp => {\n        if (rsp.status == 401) alert(rsp.msg);else {\n          console.log(rsp);\n          this.props.history.push(\"/register\");\n        }\n      }));\n    };\n\n    this.state = {\n      email: \"\",\n      nickname: \"\",\n      PW: \"\",\n      pw1: \"\",\n      pw2: \"\",\n      phonenumber: \"\"\n    };\n  }\n\n  GotoLogIn() {\n    this.props.history.push('/login');\n  }\n\n  submitRegister() {\n    if (this.state.email.length > 0 && this.state.nickname.length > 0 && this.state.phonenumber.length > 0 && this.state.PW.length > 0) {\n      postFetch('/user/register', {\n        userName: this.state.nickname,\n        email: this.state.email,\n        password: this.state.PW,\n        phoneNumber: this.state.phonenumber\n      }, rsp => {\n        this.login(this.state.email, this.state.PW, this.props.history);\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: \"500px\",\n          padding: \"15px\",\n          margin: \"0 auto\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"80px\",\n            color: \"black\",\n            textAlign: \"center\",\n            verticalAlign: \"middle\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(TaobaoCircleOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), \"\\u6DD8\\u5174\\u8DA3\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          style: {\n            maxWidth: \"300px\",\n            margin: \"0 auto\"\n          },\n          name: \"register\",\n          initialValues: {\n            prefix: '86'\n          },\n          scrollToFirstError: true,\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"email\",\n            rules: [{\n              type: 'email',\n              message: '邮箱格式不规范'\n            }, {\n              required: true,\n              message: '请输入邮箱'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              id: \"emailInput\",\n              placeholder: \"输入邮箱\",\n              onChange: e => {\n                this.setState({\n                  email: e.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: '请输入密码'\n            }],\n            hasFeedback: true,\n            children: /*#__PURE__*/_jsxDEV(Input.Password, {\n              id: \"pw1\",\n              onChange: e => {\n                if (e.target.value === this.state.pw2) {\n                  this.setState({\n                    pw1: e.target.value,\n                    PW: e.target.value\n                  });\n                } else {\n                  this.setState({\n                    pw1: e.target.value\n                  });\n                }\n              },\n              placeholder: \"设置密码\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"confirm\",\n            dependencies: ['password'],\n            hasFeedback: true,\n            rules: [{\n              required: true,\n              message: '请确认密码'\n            }, ({\n              getFieldValue\n            }) => ({\n              validator(rule, value) {\n                if (!value || getFieldValue('password') === value) {\n                  return Promise.resolve();\n                }\n\n                return Promise.reject('两次输入不一致');\n              }\n\n            })],\n            children: /*#__PURE__*/_jsxDEV(Input.Password, {\n              id: \"pw2\",\n              onChange: e => {\n                if (e.target.value === this.state.pw1) {\n                  this.setState({\n                    pw2: e.target.value,\n                    PW: e.target.value\n                  });\n                } else {\n                  this.setState({\n                    pw2: e.target.value\n                  });\n                }\n              },\n              placeholder: \"确认密码\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"nickname\",\n            rules: [{\n              required: true,\n              message: '请输入昵称',\n              whitespace: true\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              id: \"nameInput\",\n              placeholder: \"设置昵称\",\n              onChange: e => {\n                this.setState({\n                  nickname: e.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"phone\",\n            rules: [{\n              required: true,\n              message: '请输入手机号'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              id: \"numberInput\",\n              placeholder: \"手机号码\",\n              style: {\n                width: '100%'\n              },\n              onChange: e => {\n                this.setState({\n                  phonenumber: e.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            style: {\n              maxWidth: \"200px\",\n              margin: \"0 auto\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              id: \"submitButton\",\n              type: \"primary\",\n              htmlType: \"submit\",\n              style: {\n                float: \"left\"\n              },\n              onClick: () => {\n                this.submitRegister();\n              },\n              children: \"\\u6CE8\\u518C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              style: {\n                float: \"right\"\n              },\n              onClick: () => this.GotoLogIn(),\n              children: \"\\u8FD4\\u56DE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["F:/JavaProjects/ticket/src/page/RegisterPage.js"],"names":["React","Button","Form","Input","Select","postFetch","Option","prefixSelector","width","RegisterPage","Component","constructor","props","login","id","state","pw","console","log","fetch","method","mode","cache","then","rsp","json","status","alert","msg","history","push","email","nickname","PW","pw1","pw2","phonenumber","GotoLogIn","submitRegister","length","userName","password","phoneNumber","render","maxWidth","padding","margin","fontSize","color","textAlign","verticalAlign","prefix","type","message","required","e","setState","target","value","getFieldValue","validator","rule","Promise","resolve","reject","whitespace","float"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {Button, Form, Input, Select} from 'antd';\r\nimport 'antd/dist/antd.css';\r\nimport {postFetch} from \"../function/fetch\";\r\n\r\nconst {Option} = Select;\r\n\r\nconst prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n        <Select\r\n            style={{\r\n                width: 70,\r\n            }}\r\n        >\r\n            <Option value=\"86\">+86</Option>\r\n            <Option value=\"87\">+87</Option>\r\n        </Select>\r\n    </Form.Item>\r\n);\r\n\r\nexport default class RegisterPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: \"\",\r\n            nickname: \"\",\r\n            PW: \"\",\r\n            pw1: \"\",\r\n            pw2: \"\",\r\n            phonenumber: \"\",\r\n        }\r\n\r\n    }\r\n\r\n    GotoLogIn() {\r\n        this.props.history.push('/login');\r\n    }\r\n\r\n    login = () => {\r\n        let id = this.state.id\r\n        let pw = this.state.pw\r\n        console.log(id)\r\n        console.log(pw)\r\n        fetch('http://192.168.1.106:8080/login?id='+id+\"&password=\"+pw,{\r\n            method:'POST',\r\n            mode:'cors',\r\n            cache:'default'\r\n        }).then(rsp => rsp.json().then(rsp => {\r\n            if(rsp.status==401)\r\n                alert(rsp.msg);\r\n            else {\r\n                console.log(rsp);\r\n                this.props.history.push(\"/register\")\r\n            }\r\n        }))\r\n    };\r\n\r\n\r\n    submitRegister() {\r\n        if ((this.state.email.length > 0)\r\n            && (this.state.nickname.length > 0)\r\n            && (this.state.phonenumber.length > 0)\r\n            && (this.state.PW.length > 0)) {\r\n            postFetch('/user/register',\r\n                {\r\n                    userName: this.state.nickname,\r\n                    email: this.state.email,\r\n                    password: this.state.PW,\r\n                    phoneNumber: this.state.phonenumber\r\n                }, (rsp) => {\r\n                    this.login(this.state.email, this.state.PW, this.props.history);\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div style={{\r\n                    maxWidth: \"500px\",\r\n                    padding: \"15px\",\r\n                    margin: \"0 auto\"\r\n                }}>\r\n                    <div style={{fontSize: \"80px\", color: \"black\", textAlign: \"center\", verticalAlign: \"middle\"}}>\r\n                        <TaobaoCircleOutlined/>淘兴趣\r\n                    </div>\r\n                    <Form\r\n                        style={{\r\n                            maxWidth: \"300px\",\r\n                            margin: \"0 auto\"\r\n                        }}\r\n                        name=\"register\"\r\n                        initialValues={{\r\n                            prefix: '86',\r\n                        }}\r\n                        scrollToFirstError\r\n                    >\r\n                        <Form.Item\r\n                            name=\"email\"\r\n                            rules={[\r\n                                {\r\n                                    type: 'email',\r\n                                    message: '邮箱格式不规范',\r\n                                },\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入邮箱',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input\r\n                                id=\"emailInput\"\r\n                                placeholder={\"输入邮箱\"}\r\n                                onChange={(e) => {\r\n                                    this.setState({email: e.target.value})\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"password\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入密码',\r\n                                },\r\n                            ]}\r\n                            hasFeedback\r\n                        >\r\n                            <Input.Password\r\n                                id=\"pw1\"\r\n                                onChange={(e) => {\r\n                                    if (e.target.value === this.state.pw2) {\r\n                                        this.setState({\r\n                                            pw1: e.target.value,\r\n                                            PW: e.target.value\r\n                                        });\r\n                                    } else {\r\n                                        this.setState({\r\n                                            pw1: e.target.value\r\n                                        });\r\n                                    }\r\n                                }}\r\n                                placeholder={\"设置密码\"}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"confirm\"\r\n                            dependencies={['password']}\r\n                            hasFeedback\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请确认密码',\r\n                                },\r\n                                ({getFieldValue}) => ({\r\n                                    validator(rule, value) {\r\n                                        if (!value || getFieldValue('password') === value) {\r\n                                            return Promise.resolve();\r\n                                        }\r\n\r\n                                        return Promise.reject('两次输入不一致');\r\n                                    },\r\n                                }),\r\n                            ]}\r\n                        >\r\n                            <Input.Password\r\n                                id=\"pw2\"\r\n                                onChange={(e) => {\r\n                                    if (e.target.value === this.state.pw1) {\r\n                                        this.setState({\r\n                                            pw2: e.target.value,\r\n                                            PW: e.target.value\r\n                                        });\r\n                                    } else {\r\n                                        this.setState({\r\n                                            pw2: e.target.value\r\n                                        });\r\n                                    }\r\n                                }}\r\n                                placeholder={\"确认密码\"}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"nickname\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入昵称',\r\n                                    whitespace: true,\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input\r\n                                id=\"nameInput\"\r\n                                placeholder={\"设置昵称\"}\r\n                                onChange={(e) => {\r\n                                    this.setState({nickname: e.target.value})\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"phone\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入手机号',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input\r\n                                id=\"numberInput\"\r\n                                placeholder={\"手机号码\"}\r\n                                style={{\r\n                                    width: '100%',\r\n                                }}\r\n                                onChange={(e) => {\r\n                                    this.setState({phonenumber: e.target.value})\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item style={{maxWidth: \"200px\", margin: \"0 auto\"}}>\r\n                            <Button\r\n                                id=\"submitButton\"\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                style={{float: \"left\"}}\r\n                                onClick={() => {\r\n                                    this.submitRegister()\r\n                                }}\r\n                            >\r\n                                注册\r\n                            </Button>\r\n                            <Button\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                style={{float: \"right\"}}\r\n                                onClick={() => this.GotoLogIn()}\r\n                            >\r\n                                返回\r\n                            </Button>\r\n\r\n                        </Form.Item>\r\n                    </Form>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}