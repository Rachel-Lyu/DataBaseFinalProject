{"ast":null,"code":"import _classCallCheck from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Button,Input,DatePicker,Select,Table,Tag,Space,Col}from'antd';import React from\"react\";import{getFetch,postFetch}from\"../function/fetch\";import{BrowserRouter}from\"react-router-dom\";var Column=Table.Column;var RangePicker=DatePicker.RangePicker;var TicketInfoPage=/*#__PURE__*/function(_React$Component){_inherits(TicketInfoPage,_React$Component);var _super=_createSuper(TicketInfoPage);function TicketInfoPage(){var _this;_classCallCheck(this,TicketInfoPage);_this=_super.call(this);_this.state={data:null,types:null,selectedType:null,selectedBeginTime:null,selectedEndTime:null,keyword:\"\"};// getFetch(\"/ticket/all\",\"\",(rsp)=>this.setState({\n//     data:rsp\n// }))\nreturn _this;}_createClass(TicketInfoPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;getFetch(\"/ticket/all\",\"\",function(rsp){console.log(rsp);_this2.setState({data:rsp});});getFetch(\"/ticket/allTypes\",\"\",function(rsp){console.log(rsp);var children=[];for(var i=0;i<rsp.length;i++){children.push(/*#__PURE__*/_jsx(Select,{children:rsp[i].type_name},rsp[i].type_name));}_this2.setState({types:children});});}// componentWillUnmount() {\n//     getFetch(\"/ticket/all\",\"\",(rsp)=>this.setState({\n//         data:rsp\n//     }))\n// }\n},{key:\"search\",value:function search(){var _this3=this;if(this.state.selectedType==null||this.state.selectedBeginTime==null||this.state.selectedEndTime==null){alert(\"信息不足！\");return;}var body=new Object();body.type=this.state.selectedType;body.beginTime=this.state.selectedBeginTime;body.endTime=this.state.selectedEndTime;body.keyword=this.state.keyword;postFetch(\"/ticket/search\",body,function(rsp){_this3.setState({data:rsp});});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(Col,{span:12,offset:6,children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",style:{float:\"right\"},onClick:function onClick(){_this4.props.history.push('login');},children:\"\\u767B\\u51FA\"}),/*#__PURE__*/_jsx(Select,{style:{width:200},placeholder:\"\\u9009\\u62E9\\u95E8\\u7968\\u7C7B\\u578B\",onChange:function onChange(value){return _this4.setState({selectedType:value});},children:this.state.types}),/*#__PURE__*/_jsx(Space,{direction:\"vertical\",size:12,children:/*#__PURE__*/_jsx(RangePicker,{showTime:true,onChange:function onChange(value){if(value==null)_this4.setState({selectedBeginTime:null,selectedEndTime:null});else _this4.setState({selectedBeginTime:value[0].format('YYYY-MM-DD HH:MM:SS'),selectedEndTime:value[1].format('YYYY-MM-DD HH:MM:SS')});}})}),/*#__PURE__*/_jsx(Input,{placeholder:\"\\u5173\\u952E\\u5B57\",onChange:function onChange(e){return _this4.setState({keyword:e.target.value});}}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){_this4.search();},children:\"\\u641C\\u7D22\"}),/*#__PURE__*/_jsx(Button,{style:{float:'right'},type:\"primary\",onClick:function onClick(){_this4.props.history.push('myOrders');},children:\"\\u6211\\u7684\\u8BA2\\u5355\"}),/*#__PURE__*/_jsxs(Table,{dataSource:this.state.data,children:[/*#__PURE__*/_jsx(Column,{title:\"ticket name\",dataIndex:\"ticketName\"}),/*#__PURE__*/_jsx(Column,{title:\"price\",dataIndex:\"price\"}),/*#__PURE__*/_jsx(Column,{title:\"available nums\",dataIndex:\"availableNumber\"}),/*#__PURE__*/_jsx(Column,{title:\"Type Name\",dataIndex:\"typeName\"}),/*#__PURE__*/_jsx(Column,{title:\"\\u5F00\\u59CB\\u65F6\\u95F4\",dataIndex:\"beginTime\"}),/*#__PURE__*/_jsx(Column,{title:\"\\u7ED3\\u675F\\u65F6\\u95F4\",dataIndex:\"endTime\"}),/*#__PURE__*/_jsx(Column,{title:\"\",render:function render(record){return/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return _this4.props.history.push(\"/ticketDetail/\"+record.tid);},children:\"\\u8BE6\\u60C5\"});}},\"action\")]})]});}}]);return TicketInfoPage;}(React.Component);export{TicketInfoPage as default};","map":{"version":3,"sources":["/home/zhu/Code/IdeaProjects/ticket/src/page/TicketInfoPage.js"],"names":["Button","Input","DatePicker","Select","Table","Tag","Space","Col","React","getFetch","postFetch","BrowserRouter","Column","RangePicker","TicketInfoPage","state","data","types","selectedType","selectedBeginTime","selectedEndTime","keyword","rsp","console","log","setState","children","i","length","push","type_name","alert","body","Object","type","beginTime","endTime","float","props","history","width","value","format","e","target","search","record","tid","Component"],"mappings":"4qBAAA,OAAQA,MAAR,CAAeC,KAAf,CAAqBC,UAArB,CAAgCC,MAAhC,CAAuCC,KAAvC,CAA8CC,GAA9C,CAAmDC,KAAnD,CAA0DC,GAA1D,KAAoE,MAApE,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,CAAkBC,SAAlB,KAAkC,mBAAlC,CACA,OAAQC,aAAR,KAA4B,kBAA5B,C,GAEQC,CAAAA,M,CAAWR,K,CAAXQ,M,IAEDC,CAAAA,W,CAAeX,U,CAAfW,W,IACcC,CAAAA,c,4HACjB,yBAAc,gDACV,wBACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAC,IADI,CAETC,KAAK,CAAC,IAFG,CAGTC,YAAY,CAAC,IAHJ,CAITC,iBAAiB,CAAC,IAJT,CAKTC,eAAe,CAAC,IALP,CAMTC,OAAO,CAAC,EANC,CAAb,CAQA;AACA;AACA;AAZU,aAab,C,wFAEmB,iBAChBZ,QAAQ,CAAC,aAAD,CAAe,EAAf,CAAkB,SAACa,GAAD,CAAO,CAC7BC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,MAAI,CAACG,QAAL,CAAc,CACVT,IAAI,CAACM,GADK,CAAd,EAGH,CALO,CAAR,CAMAb,QAAQ,CAAC,kBAAD,CAAoB,EAApB,CAAuB,SAACa,GAAD,CAAO,CAClCC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAII,CAAAA,QAAQ,CAAC,EAAb,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAACL,GAAG,CAACM,MAAlB,CAAyBD,CAAC,EAA1B,CAA6B,CACzBD,QAAQ,CAACG,IAAT,cAAc,KAAC,MAAD,WAAgCP,GAAG,CAACK,CAAD,CAAH,CAAOG,SAAvC,EAAaR,GAAG,CAACK,CAAD,CAAH,CAAOG,SAApB,CAAd,EACH,CACD,MAAI,CAACL,QAAL,CAAc,CAACR,KAAK,CAACS,QAAP,CAAd,EACH,CAPO,CAAR,CAQH,CAED;AACA;AACA;AACA;AACA;uCAEQ,iBACJ,GAAG,KAAKX,KAAL,CAAWG,YAAX,EAAyB,IAAzB,EAAiC,KAAKH,KAAL,CAAWI,iBAAX,EAA8B,IAA/D,EAAuE,KAAKJ,KAAL,CAAWK,eAAX,EAA4B,IAAtG,CAA2G,CACvGW,KAAK,CAAC,OAAD,CAAL,CACA,OACH,CACD,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,MAAJ,EAAX,CACAD,IAAI,CAACE,IAAL,CAAU,KAAKnB,KAAL,CAAWG,YAArB,CACAc,IAAI,CAACG,SAAL,CAAe,KAAKpB,KAAL,CAAWI,iBAA1B,CACAa,IAAI,CAACI,OAAL,CAAa,KAAKrB,KAAL,CAAWK,eAAxB,CACAY,IAAI,CAACX,OAAL,CAAe,KAAKN,KAAL,CAAWM,OAA1B,CACAX,SAAS,CAAC,gBAAD,CAAkBsB,IAAlB,CAAuB,SAACV,GAAD,CAAO,CACnC,MAAI,CAACG,QAAL,CAAc,CAACT,IAAI,CAACM,GAAN,CAAd,EACH,CAFQ,CAAT,CAGH,C,uCAEQ,iBACL,mBACI,MAAC,GAAD,EAAK,IAAI,CAAE,EAAX,CAAe,MAAM,CAAE,CAAvB,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,KAAK,CAAE,CAACe,KAAK,CAAC,OAAP,CAA9B,CAA+C,OAAO,CAAE,kBAAI,CACxD,MAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBV,IAAnB,CAAwB,OAAxB,EACH,CAFD,0BADJ,cAII,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEW,KAAK,CAAE,GAAT,CAAf,CAA+B,WAAW,CAAC,sCAA3C,CAAoD,QAAQ,CAAE,kBAACC,KAAD,QAAS,CAAA,MAAI,CAAChB,QAAL,CAAc,CAACP,YAAY,CAACuB,KAAd,CAAd,CAAT,EAA9D,UACK,KAAK1B,KAAL,CAAWE,KADhB,EAJJ,cAOI,KAAC,KAAD,EAAO,SAAS,CAAC,UAAjB,CAA4B,IAAI,CAAE,EAAlC,uBACI,KAAC,WAAD,EAAa,QAAQ,KAArB,CAAsB,QAAQ,CAAE,kBAACwB,KAAD,CAAS,CACrC,GAAGA,KAAK,EAAE,IAAV,CACI,MAAI,CAAChB,QAAL,CAAc,CACVN,iBAAiB,CAAC,IADR,CAEVC,eAAe,CAAC,IAFN,CAAd,EADJ,IAMI,CAAA,MAAI,CAACK,QAAL,CAAc,CACVN,iBAAiB,CAACsB,KAAK,CAAC,CAAD,CAAL,CAASC,MAAT,CAAgB,qBAAhB,CADR,CAEVtB,eAAe,CAACqB,KAAK,CAAC,CAAD,CAAL,CAASC,MAAT,CAAgB,qBAAhB,CAFN,CAAd,EAIP,CAXD,EADJ,EAPJ,cAqBI,KAAC,KAAD,EAAO,WAAW,CAAC,oBAAnB,CAAyB,QAAQ,CAAE,kBAACC,CAAD,QAAK,CAAA,MAAI,CAAClB,QAAL,CAAc,CAACJ,OAAO,CAACsB,CAAC,CAACC,MAAF,CAASH,KAAlB,CAAd,CAAL,EAAnC,EArBJ,cAsBI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAE,kBAAI,CAChC,MAAI,CAACI,MAAL,GACP,CAFG,0BAtBJ,cAyBI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAACR,KAAK,CAAC,OAAP,CAAf,CAAgC,IAAI,CAAC,SAArC,CAA+C,OAAO,CAAE,kBAAI,CACxD,MAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBV,IAAnB,CAAwB,UAAxB,EACH,CAFD,sCAzBJ,cA4BA,MAAC,KAAD,EAAO,UAAU,CAAE,KAAKd,KAAL,CAAWC,IAA9B,wBACI,KAAC,MAAD,EAAQ,KAAK,CAAC,aAAd,CAA4B,SAAS,CAAC,YAAtC,EADJ,cAEI,KAAC,MAAD,EAAQ,KAAK,CAAC,OAAd,CAAsB,SAAS,CAAC,OAAhC,EAFJ,cAGI,KAAC,MAAD,EAAQ,KAAK,CAAC,gBAAd,CAA+B,SAAS,CAAC,iBAAzC,EAHJ,cAII,KAAC,MAAD,EAAQ,KAAK,CAAC,WAAd,CAA0B,SAAS,CAAC,UAApC,EAJJ,cAKI,KAAC,MAAD,EAAQ,KAAK,CAAC,0BAAd,CAAqB,SAAS,CAAC,WAA/B,EALJ,cAMI,KAAC,MAAD,EAAQ,KAAK,CAAC,0BAAd,CAAqB,SAAS,CAAC,SAA/B,EANJ,cAOI,KAAC,MAAD,EACI,KAAK,CAAC,EADV,CAGI,MAAM,CAAE,gBAAC8B,MAAD,qBACA,UAAG,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACR,KAAL,CAAWC,OAAX,CAAmBV,IAAnB,CAAwB,iBAAiBiB,MAAM,CAACC,GAAhD,CAAJ,EAAZ,0BADA,EAHZ,EAEQ,QAFR,CAPJ,GA5BA,GADJ,CA8CH,C,4BArGuCvC,KAAK,CAACwC,S,SAA7BlC,c","sourcesContent":["import {Button,Input,DatePicker,Select,Table, Tag, Space ,Col} from 'antd';\r\nimport React from \"react\";\r\nimport {getFetch, postFetch} from \"../function/fetch\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\nconst { Column } = Table;\r\n\r\nconst {RangePicker} = DatePicker\r\nexport default class TicketInfoPage extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            data:null,\r\n            types:null,\r\n            selectedType:null,\r\n            selectedBeginTime:null,\r\n            selectedEndTime:null,\r\n            keyword:\"\"\r\n        }\r\n        // getFetch(\"/ticket/all\",\"\",(rsp)=>this.setState({\r\n        //     data:rsp\r\n        // }))\r\n    }\r\n\r\n    componentDidMount() {\r\n        getFetch(\"/ticket/all\",\"\",(rsp)=>{\r\n            console.log(rsp)\r\n            this.setState({\r\n                data:rsp\r\n            })\r\n        })\r\n        getFetch(\"/ticket/allTypes\",\"\",(rsp)=>{\r\n            console.log(rsp);\r\n            let children=[];\r\n            for(let i=0;i<rsp.length;i++){\r\n                children.push(<Select key={rsp[i].type_name}>{rsp[i].type_name}</Select>);\r\n            }\r\n            this.setState({types:children})\r\n        })\r\n    }\r\n\r\n    // componentWillUnmount() {\r\n    //     getFetch(\"/ticket/all\",\"\",(rsp)=>this.setState({\r\n    //         data:rsp\r\n    //     }))\r\n    // }\r\n\r\n    search(){\r\n        if(this.state.selectedType==null || this.state.selectedBeginTime==null || this.state.selectedEndTime==null){\r\n            alert(\"信息不足！\")\r\n            return;\r\n        }\r\n        let body = new Object();\r\n        body.type=this.state.selectedType;\r\n        body.beginTime=this.state.selectedBeginTime;\r\n        body.endTime=this.state.selectedEndTime;\r\n        body.keyword = this.state.keyword\r\n        postFetch(\"/ticket/search\",body,(rsp)=>{\r\n            this.setState({data:rsp});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <Col span={12} offset={6}>\r\n                <Button type=\"primary\" style={{float:\"right\"}} onClick={()=>{\r\n                    this.props.history.push('login');\r\n                }}>登出</Button>\r\n                <Select style={{ width: 200 }} placeholder=\"选择门票类型\" onChange={(value)=>this.setState({selectedType:value})}>\r\n                    {this.state.types}\r\n                </Select>\r\n                <Space direction=\"vertical\" size={12}>\r\n                    <RangePicker showTime onChange={(value)=>{\r\n                        if(value==null)\r\n                            this.setState({\r\n                                selectedBeginTime:null,\r\n                                selectedEndTime:null\r\n                            })\r\n                        else\r\n                            this.setState({\r\n                                selectedBeginTime:value[0].format('YYYY-MM-DD HH:MM:SS'),\r\n                                selectedEndTime:value[1].format('YYYY-MM-DD HH:MM:SS')\r\n                            })\r\n                    }}/>\r\n                </Space>\r\n                <Input placeholder=\"关键字\" onChange={(e)=>this.setState({keyword:e.target.value})} />\r\n                <Button type=\"primary\" onClick={()=>{\r\n                    this.search()\r\n            }}>搜索</Button>\r\n                <Button style={{float:'right'}} type=\"primary\" onClick={()=>{\r\n                    this.props.history.push('myOrders');\r\n                }}>我的订单</Button>\r\n            <Table dataSource={this.state.data}>\r\n                <Column title=\"ticket name\" dataIndex=\"ticketName\"/>\r\n                <Column title=\"price\" dataIndex=\"price\"/>\r\n                <Column title=\"available nums\" dataIndex=\"availableNumber\"/>\r\n                <Column title=\"Type Name\" dataIndex=\"typeName\"/>\r\n                <Column title=\"开始时间\" dataIndex=\"beginTime\"/>\r\n                <Column title=\"结束时间\" dataIndex=\"endTime\" />\r\n                <Column\r\n                    title=\"\"\r\n                    key=\"action\"\r\n                    render={(record) => (\r\n                            <a onClick={()=>this.props.history.push(\"/ticketDetail/\"+record.tid)}>详情</a>\r\n                    )}\r\n                />\r\n            </Table>\r\n            </Col>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}