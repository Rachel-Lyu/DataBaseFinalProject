{"ast":null,"code":"import _classCallCheck from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/zhu/Code/IdeaProjects/ticket/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from\"react\";import Link from\"react\";import{Button,Checkbox,Form,Input}from'antd';import'antd/dist/antd.css';import{BrowserRouter}from\"react-router-dom\";var LoginPage=/*#__PURE__*/function(_React$Component){_inherits(LoginPage,_React$Component);var _super=_createSuper(LoginPage);function LoginPage(props){var _this;_classCallCheck(this,LoginPage);_this=_super.call(this,props);_this.login=function(){var id=_this.state.id;var pw=_this.state.pw;fetch('api/api/login?id='+id+\"&password=\"+pw,{method:'GET',cache:'default'}).then(function(rsp){return rsp.json().then(function(rsp){if(rsp.code!=0)console.log(rsp);else{console.log(rsp);localStorage.setItem('log',1);_this.props.history.push(\"/tickets\");}});});};_this.state={id:\"\",pw:\"\"};return _this;}_createClass(LoginPage,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"500px\",padding:\"15px\",margin:\"0 auto\"},children:/*#__PURE__*/_jsxs(Form,{className:\"login-form\",initialValues:{remember:true},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"id\",rules:[{required:true,message:'请输入id'}],children:/*#__PURE__*/_jsx(Input,{id:\"id\",placeholder:\"id\",onChange:function onChange(e){_this2.setState({id:e.target.value});}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'请输入密码'}],children:/*#__PURE__*/_jsx(Input,{id:\"pwInput\",type:\"password\",placeholder:\"\\u5BC6\\u7801\",onChange:function onChange(e){_this2.setState({pw:e.target.value});}})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Form.Item,{name:\"remember\",valuePropName:\"checked\",noStyle:true,children:/*#__PURE__*/_jsx(Checkbox,{children:\"\\u8BB0\\u4F4F\\u6211\"})})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Button,{\"data-cy\":\"login\",type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",onClick:function onClick(){return _this2.login();},children:\"\\u767B\\u5F55\"}),\"\\u6216\\u8005 \",/*#__PURE__*/_jsx(\"a\",{\"data-cy\":\"goToRegister\",children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this2.props.history.push(\"/register\");},children:\"\\u7ACB\\u523B\\u6CE8\\u518C\"})})]})]})})});}}]);return LoginPage;}(React.Component);export{LoginPage as default};","map":{"version":3,"sources":["/home/zhu/Code/IdeaProjects/ticket/src/page/LoginPage.js"],"names":["React","Link","Button","Checkbox","Form","Input","BrowserRouter","LoginPage","props","login","id","state","pw","fetch","method","cache","then","rsp","json","code","console","log","localStorage","setItem","history","push","maxWidth","padding","margin","remember","required","message","e","setState","target","value","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Link from \"react\";\r\nimport {Button, Checkbox, Form, Input} from 'antd';\r\nimport 'antd/dist/antd.css';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\nexport default class LoginPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id: \"\",\r\n            pw: \"\",\r\n        }\r\n    }\r\n\r\n    login = () => {\r\n        let id = this.state.id\r\n        let pw = this.state.pw\r\n        fetch('api/api/login?id='+id+\"&password=\"+pw,{\r\n            method:'GET',\r\n            cache:'default'\r\n        }).then(rsp => rsp.json().then(rsp => {\r\n            if(rsp.code!=0)\r\n                console.log(rsp);\r\n            else {\r\n                console.log(rsp);\r\n                localStorage.setItem('log',1);\r\n                this.props.history.push(\"/tickets\")\r\n            }\r\n        }))\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div style={{\r\n                    maxWidth: \"500px\",\r\n                    padding: \"15px\",\r\n                    margin: \"0 auto\"\r\n                }}>\r\n                    <Form\r\n                        className=\"login-form\"\r\n                        initialValues={{\r\n                            remember: true,\r\n                        }}\r\n                    >\r\n                        <Form.Item\r\n                            name=\"id\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入id',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input\r\n                                id=\"id\"\r\n                                placeholder=\"id\"\r\n                                onChange={(e) => {\r\n                                    this.setState({id: e.target.value})\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"password\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: '请输入密码',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input\r\n                                id=\"pwInput\"\r\n                                type=\"password\"\r\n                                placeholder=\"密码\"\r\n                                onChange={(e) => {\r\n                                    this.setState({pw: e.target.value})\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                                <Checkbox>记住我</Checkbox>\r\n                            </Form.Item>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item>\r\n                            <Button\r\n                                data-cy=\"login\"\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                className=\"login-form-button\"\r\n                                onClick={() => this.login()}\r\n                            >\r\n                                登录\r\n                            </Button>\r\n                            或者 <a data-cy=\"goToRegister\"><span\r\n                            onClick={() => this.props.history.push(\"/register\")}>立刻注册\r\n                            </span>\r\n                        </a>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}